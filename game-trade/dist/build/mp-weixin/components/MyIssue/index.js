"use strict";var e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("uni-dateformat")+e.resolveComponent("uni-icons")+e.resolveComponent("unicloud-db")+e.resolveComponent("uni-popup-dialog")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js")+(()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const n=e.defineComponent({__name:"index",props:{where:null},setup(n){const o=n,t=e.ref(null),a=e.ref(null),i=e.ref(),u=e.pn.database(),r=async()=>{await u.collection("consignment").where(`_id=='${i.value}'`).update({state:1}),t.value.refresh()};return(n,u)=>({a:e.w((({data:n,loading:o,error:t},u,r)=>e.e({a:t},t?{b:e.t(t.message)}:{c:e.f(n,((n,o,t)=>e.e({a:e.o((o=>{return t=n._id,void e.index.navigateTo({url:`/pages/Detail/index?id=${t}`});var t})),b:n.screenshot[0].url,c:e.t(n.game),d:e.t(n.price),e:"1ea53ee7-1-"+r+"-"+t+",1ea53ee7-0",f:e.p({date:n.create_time,format:"yyyy-MM-dd hh:mm"}),g:0==n.state},0==n.state?{h:e.o((e=>{return o=n._id,i.value=o,void a.value.open("center");var o})),i:"1ea53ee7-2-"+r+"-"+t+",1ea53ee7-0",j:e.p({type:"trash",size:"20"})}:{},{k:1==n.state},(n.state,{}),{l:n._id})))},{d:o},{},{e:0==n.length},(n.length,{}),{f:r,g:u})),{name:"d",path:"a",vueId:"1ea53ee7-0"}),b:e.sr(t,"1ea53ee7-0",{k:"udb"}),c:e.p({collection:"consignment",orderby:"create_time desc",field:"screenshot,_id,create_time,game,price,state",getone:!1,where:o.where,"page-size":4}),d:e.o(r),e:e.p({type:"warning",cancelText:"取消",confirmText:"确认",content:"你确定要下架商品吗"}),f:e.sr(a,"1ea53ee7-3",{k:"soldOut"}),g:e.p({type:"dialog"})})}});var o=e._export_sfc(n,[["__scopeId","data-v-1ea53ee7"]]);wx.createComponent(o);
