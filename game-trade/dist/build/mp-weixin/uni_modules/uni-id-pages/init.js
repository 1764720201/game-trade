"use strict";var e=require("../../common/vendor.js"),o=require("./config.js");const n=e.pn.importObject("uni-id-co",{customUI:!0}),{loginTypes:i,debug:s}=o.config;exports.uniIdPageInit=async function(){if(s){let{supportedLoginType:e}=await n.getSupportedLoginType();console.log("supportedLoginType: "+JSON.stringify(e));let o={smsCode:"mobile-code",univerify:"univerify",username:"username-password",weixin:"weixin",qq:"qq",xiaomi:"xiaomi",sinaweibo:"sinaweibo",taobao:"taobao",facebook:"facebook",google:"google",alipay:"alipay",apple:"apple"},s=i.filter((n=>!e.includes(o[n])));s.length&&console.error(`错误：前端启用的登录方式:${s.join("，")};没有在服务端完成配置。配置文件路径："/uni_modules/uni-config-center/uniCloud/cloudfunctions/common/uni-config-center/uni-id/config.json"`)}e.pn.database().on("error",(function({code:e,message:o}){console.error("onDBError",{code:e,message:o})})),e.pn.onRefreshToken&&e.pn.onRefreshToken((()=>{console.log("onRefreshToken"),e.index.getPushClientId&&e.index.getPushClientId({success:async function(e){console.log(e);let o=e.cid;console.log(o);let i=await n.setPushCid({pushClientId:o});console.log("getPushClientId",i)},fail(e){console.log(e)}})}))};
