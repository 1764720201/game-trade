"use strict";var e=require("../../../../common/vendor.js");const t={data:()=>({search_list_old:[],search_input:"",is_hot_show:!0}),created(){this._init_search()},props:{is_show_more:{value:Boolean,default:!0},search_list_old_man_num:{value:Number,default:10},search_list_hot:{value:Array,default:[]},placeholder:{value:String,default:"请输入搜索内容"},store_key:{value:String,default:"search_list"},color_border:{value:String,default:""},color_text:{value:String,default:"#30c66c"},search_name:{value:String,default:"搜索"},input_text:{value:String,default:""}},watch:{search_list_hot(e){e&&(this.search_list_hot=e)},input_text(e){e&&(this.search_input=e,this.saveKeyword())}},methods:{back(){e.index.navigateBack()},onClickInput(){this.saveKeyword()},onClickInputValue(e){if(!e)return!1;this.search_input=e.toLowerCase(),this.saveKeyword()},_init_search(){var t=this,s=t.store_key;e.index.getStorage({key:s,success:e=>{var s=JSON.parse(e.data);t.search_list_old=s}})},saveKeyword(){var t=this;if(!this.search_input)return!1;this.search_input=this.search_input.toLowerCase();var s=this.search_input,i=t.store_key;e.index.getStorage({key:i,success:a=>{var o=JSON.parse(a.data),r=o.indexOf(s);-1==r||o.splice(r,1),o.unshift(s),o.length>t.search_list_old_man_num&&o.pop(),e.index.setStorage({key:i,data:JSON.stringify(o)}),t.search_list_old=o},fail:a=>{var o=[s];e.index.setStorage({key:i,data:JSON.stringify(o)}),t.search_list_old=o}}),t.$emit("onSearchNameApi",this.search_input)},onClickDel(){this.search_input="",this.$emit("onSearchNameApi","")},onClickDelAll(){var t=this;console.log("---全部删除-log--"),e.index.showModal({title:"提示",content:"确定全部删除",success(s){s.confirm&&(e.index.removeStorageSync(t.store_key),t.search_list_old=[],t.$emit("onClickDelAllApi",""))}})},onClickShowHot(){this.is_hot_show=1!=this.is_hot_show}}};if(!Array){e.resolveComponent("uni-icons")()}Math;var s=e._export_sfc(t,[["render",function(t,s,i,a,o,r){return e.e({a:e.o(r.back),b:e.p({type:"arrow-left",size:"30",color:"#1296db"}),c:i.placeholder,d:e.o(((...e)=>r.onClickInput&&r.onClickInput(...e))),e:o.search_input,f:e.o((e=>o.search_input=e.detail.value)),g:e.o(r.onClickInput),h:e.p({type:"search",size:"30",color:"#1296db"}),i:i.is_show_more},i.is_show_more?e.e({j:e.o(r.onClickDelAll),k:e.p({type:"trash",size:"25"}),l:0==o.search_list_old.length},(o.search_list_old.length,{}),{m:o.search_list_old.length>0},o.search_list_old.length>0?{n:e.f(o.search_list_old,((t,s,i)=>({a:e.t(t||"无"),b:s,c:e.o((e=>r.onClickInputValue(t)),s)})))}:{},{o:i.search_list_hot.length>0},(i.search_list_hot.length,{}),{p:i.search_list_hot.length>0&&o.is_hot_show},i.search_list_hot.length>0&&o.is_hot_show?{q:e.f(i.search_list_hot,((t,s,i)=>({a:"47569056-3-"+i,b:e.t(t||"无"),c:s,d:e.o((e=>r.onClickInputValue(t)),s)}))),r:e.p({type:"fire",size:"30",color:"orange"})}:{}):{})}]]);wx.createComponent(s);
