"use strict";var e=require("../../../common/vendor.js"),a=require("../../../store/index.js");if(require("../../../store/user.js"),require("../../../store/LeagueofLegend.js"),require("../../../store/GenshinImpact.js"),require("../../../store/GloryOfTheKing.js"),require("../../../store/detail.js"),!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js")+e.unref(t))();const t=()=>"../../../components/List/index.js",u=e.defineComponent({__name:"index",setup(t){const u=e.ref([{value:0,text:"500以下"},{value:1,text:"500-1000"},{value:2,text:"1000-3000"},{value:3,text:"3000-10000"},{value:4,text:"10000-30000"},{value:5,text:"30000以上"}]),l=e.ref([{value:0,text:"支持"},{value:1,text:"不支持"}]),r=e.ref(null),v=()=>{r.value.open()},o=a.useStore(),{email:s}=e.storeToRefs(o.GenshinImpact),{grading:n}=e.storeToRefs(o.LeagueofLegend),c=e.ref("原神"),i=e.ref(`game=='${c.value}'&&state==0`),p=e.ref([]),f=e.ref([]),d=e.ref(""),m=e.ref(""),x=a=>{var t;p.value.length=0;const u=e.storeToRefs(o[a]);null==(t=u.allServer)||t.value.forEach((e=>{p.value.push(...e)})),f.value=u.region.value.slice(0),0!=f.value.findIndex((e=>"全部"==e.text))&&f.value.unshift({value:999,text:"全部"})},h=()=>{d.value=f.value[0].text},b=e=>{switch(c.value=e,i.value=`game=='${c.value}'&&state==0`,e){case"原神":x("GenshinImpact");break;case"英雄联盟":x("LeagueofLegend");break;case"王者荣耀":x("GloryOfTheKing")}h()},g=e=>{"area"==e&&(d.value="全部",m.value=""),"screen"==e&&(A.value="",E.value="",O.value="")},k=a=>{const t=e.ref([]);t.value.push(`game=='${c.value}'`),t.value.push("state==0"),"area"==a&&("全部"!=d.value&&t.value.push(`region=='${d.value}'`),m.value&&t.value.push(`server=='${m.value}'`),r.value.close()),"screen"==a&&("支持"==A.value&&t.value.push("materials=='提供'"),"不支持"==A.value&&t.value.push("materials=='不提供'"),E.value&&t.value.push(`email=='${E.value}'`),O.value&&t.value.push(`grading=='${O.value}'`),R.value&&t.value.push(S.value),z.value.close()),i.value=t.value.join("&&")},y=e.reactive([]),j=e.reactive([]),L=e.rn.database();e.onLoad((async()=>{await L.collection("category").orderBy("order","asc").get().then((e=>{y.push(...e.result.data.slice(0,4)),j.push(...e.result.data)})),x("GenshinImpact"),h()}));const _=e.ref(null),w=()=>{_.value.open("bottom")},G=()=>{_.value.close()},q=e.ref([{value:0,text:"默认排序"},{value:1,text:"最新发布"},{value:2,text:"价格最低"},{value:3,text:"价格最高"}]),I=e.ref(null),T=()=>{I.value.open()},$=e.ref("create_time desc"),z=e.ref(null),C=()=>{z.value.open()},A=e.ref(""),E=e.ref(""),O=e.ref(""),R=e.ref(""),S=e.ref("");return(a,t)=>e.e({a:e.f(y,((a,t,u)=>({a:a.icon,b:e.t(a.name),c:e.s(c.value==a.name?{fontWeight:900}:{color:"#a9a9a9"}),d:a.id,e:e.o((e=>b(a.name)),a.id)}))),b:e.o(w),c:e.o(G),d:e.p({type:"arrow-left",size:"30",color:"#1296db"}),e:e.f(j,((a,t,u)=>({a:a.icon,b:e.t(a.name),c:a.id,d:e.o((e=>(e=>{if(y[0].name==e.name)return;c.value=e.name,y.forEach(((a,t)=>{a.name==e.name&&(y.splice(t,1),y.unshift(e))})),-1==y.map((a=>a.name==e.name)).indexOf(!0)&&(y.pop(),y.unshift(e)),b(e.name),_.value.close()})(a)),a.id)}))),f:e.sr(_,"1a8d72af-0",{k:"popup"}),g:e.p({type:"bottom",safeArea:!1}),h:e.p({type:"bottom",size:"15",color:"#ccc"}),i:e.o(v),j:e.p({type:"bottom",size:"15",color:"#ccc"}),k:e.o(T),l:e.p({type:"bars",size:"15",color:"#ccc"}),m:e.o(C),n:e.p({game:c.value,where:i.value,sort:$.value}),o:e.f(f.value,((a,t,u)=>({a:e.t(a.text),b:a.value,c:e.n(d.value==a.text?"active":""),d:e.o((t=>(a=>{var t;d.value=a.text;const u=e.ref("");switch(c.value){case"原神":u.value="GenshinImpact";break;case"英雄联盟":u.value="LeagueofLegend";break;case"王者荣耀":u.value="GloryOfTheKing"}const l=e.storeToRefs(o[u.value]),r=e.ref([]);l.allServer.value.forEach((e=>{r.value.push(...e)})),"全部"!=a.text?p.value=null==(t=l.allServer)?void 0:t.value[a.value]:p.value=r.value})(a)),a.value)}))),p:e.f(p.value,((a,t,u)=>({a:e.t(a.text),b:a.text,c:e.n(m.value==a.text?"active":""),d:e.o((e=>{return t=a.text,void(m.value=t);var t}),a.text)}))),q:e.o((e=>g("area"))),r:e.o((e=>k("area"))),s:e.sr(r,"1a8d72af-6",{k:"area"}),t:e.p({type:"right"}),v:e.f(q.value,((a,t,u)=>({a:e.t(a.text),b:a.value,c:e.o((e=>(e=>{switch(e){case 0:case 1:$.value="create_time desc";break;case 2:$.value="price asc";break;case 3:$.value="price desc"}I.value.close()})(a.value)),a.value)}))),w:e.sr(I,"1a8d72af-7",{k:"order"}),x:e.p({type:"bottom",safeArea:!1}),y:e.f(u.value,((a,t,l)=>({a:e.t(a.text),b:a.value,c:e.o((e=>(e=>{switch(R.value=u.value[e].text,e){case 0:S.value="price<500";break;case 1:S.value="price>=500&&price<1000";break;case 2:S.value="price>=1000&&price<3000";break;case 3:S.value="price>=3000&&price<10000";break;case 4:S.value="price>=10000&&price<30000";break;case 5:S.value="price>30000"}})(a.value)),a.value),d:e.n(R.value==a.text?"active":"")}))),z:e.f(l.value,((a,t,u)=>({a:e.t(a.text),b:a.value,c:e.o((e=>{return t=a.text,void(A.value=t);var t}),a.value),d:e.n(A.value==a.text?"active":"")}))),A:"英雄联盟"==c.value},"英雄联盟"==c.value?{B:e.f(e.unref(n),((a,t,u)=>({a:e.t(a.text),b:a.value,c:e.o((e=>{return t=a.text,void(O.value=t);var t}),a.value),d:e.n(O.value==a.text?"active":"")})))}:{},{C:"原神"==c.value},"原神"==c.value?{D:e.f(e.unref(s),((a,t,u)=>({a:e.t(a.text),b:a.value,c:e.n(E.value==a.text?"active":""),d:e.o((e=>{return t=a.text,void(E.value=t);var t}),a.value)})))}:{},{E:e.o((e=>g("screen"))),F:e.o((e=>k("screen"))),G:e.sr(z,"1a8d72af-8",{k:"screen"}),H:e.p({type:"right"})})}});var l=e._export_sfc(u,[["__scopeId","data-v-1a8d72af"]]);wx.createComponent(l);
