"use strict";var e=require("../../common/vendor.js");Math||(e.unref(t)+e.unref(a)+e.unref(n))();const t=()=>"../../components/InputBox/index.js",a=()=>"../../components/Check/index.js",n=()=>"../../components/Button/index.js",o=e.defineComponent({__name:"index",setup(t){const a=e.reactive({game:"",region:"",price:0}),n=e.ref(),o=e.ref(),s=e.ref(),l=e.ref();e.onLoad((e=>{Object.assign(a,JSON.parse(e.consignment)),T()}));const i=e.ref(!1),u=e=>{e.detail.value[0]?i.value=!0:i.value=!1},r=[{value:0,text:"提供"},{value:1,text:"不提供"}],v=[{value:0,text:"发布"},{value:1,text:"不发布"}],p={account:"",password:"",phone:"",materials:"",express:""},c=e=>{n.value=e},d=e=>{o.value=e},x=e=>{s.value=e},f=e=>{l.value=e},m=e.ref(),h=e.ref(),w=e=>{m.value=e},g=e=>{h.value=e},j=e.ref(!0),b=(t,a,n)=>{j.value&&(n?(j.value=!0,p[a]=n):(e.index.showToast({title:t,icon:"none"}),j.value=!1))},_=(t,a,n,o)=>{j.value&&(o>=0?(p[t]=a[o].text,j.value=!0):(e.index.showToast({title:n,icon:"none"}),j.value=!1))},y=e.ref(!0),T=()=>{e.watch((()=>[o.value,s.value]),(()=>{o.value!=s.value?y.value=!1:y.value=!0}))},O=e.rn.database(),k=async()=>{a.price=Number(a.price),a.state=0,j.value=!0,y.value?(b("请输入账号","account",n.value),b("请输入密码","password",o.value),b("请输入手机号","phone",l.value),_("materials",r,"请选择是否提供包赔材料",m.value),_("express",v,"请选择是否同时发布急速回收",h.value),i.value||!j.value?await O.collection("consignment").add(Object.assign(p,a)).then((()=>{e.index.reLaunch({url:"/pages/Home/index",success(){e.index.showToast({title:"发布成功"})}})})):e.index.showToast({title:"请同意交易规则",icon:"none"})):e.index.showToast({title:"请输入相同的密码",icon:"none"})};return(t,a)=>e.e({a:e.o(c),b:e.p({title:"游戏账号",tips:"请填写登录账号(微信/QQ等)",type:"text",position:"left"}),c:e.o(d),d:e.p({title:"登陆密码",tips:"请填写游戏密码",type:"password",position:"left"}),e:e.o(x),f:e.p({title:"确认登陆密码",tips:"请确认游戏密码",type:"password",position:"left"}),g:!y.value},(y.value,{}),{h:e.o(f),i:e.p({title:"手机号",tips:"请填写联系号码",type:"number",position:"left"}),j:e.o(w),k:e.p({range:r,title:"包赔材料"}),l:e.o(g),m:e.p({range:v,title:"是否同时发布急速回收"}),n:i.value,o:e.o(u),p:e.o(k),q:e.p({title:"发布"})})}});var s=e._export_sfc(o,[["__scopeId","data-v-6a603e95"]]);wx.createPage(s);
